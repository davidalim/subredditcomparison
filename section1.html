<head>
	    <script type="text/javascript" src="js/jquery.jcarousel.js"></script>	
	    <script type="text/javascript" src="js/jcarousel.basic.js"></script>
	    <script src="js/jquery.elevatezoom.js"></script>
	    <script src="js/jquery.easypiechart.js"></script>
	    <script src="shared_subreddits.js"></script>
</head>
<div class="container-fluid">
    <div class="row">
    		<div class="nav-title">
    			<h1 class="section-title">A Look at the Users</h1>
    		</div>
    		
    		<div class="arrow-bar">
	            <a href="#"><div class="jcarousel-control-prev next-left">Back</div></a>
	            <a href="#"><div class="jcarousel-control-next next-right">Next</div></a>
            </div>
        	<div class="panel-wrapper">
	            
	            <div class="panel-left">
	            	<div >
		            <div class="jcarousel-wrapper">
		            	
		                <div class="jcarousel">
		                    <ul>
		                        <li style="background-color: #bbbbbb;">
		                        	<div class="list-content">
			                        	<h2>The Plan</h2>
			                        	<p>
			                        		We begin our comparison of these two communities by first looking closely at the
			                        		users who make up the communities.
			                        	<p>
			                        		A person on Reddit can interract with a subreddit in several ways, doing any combination 
			                        		of: posting in the subreddit, commenting on posts, upvoting or downvoting posts and 
			                        		reading posts. Therefore, we must decide what qualifies a user to be part of the subreddit 
			                        		community, or rather which users best represent the subreddit community.
			                        	<p>
			                        		We need to spend a good amount of time discussing this, as the users we select become the 
			                        		actual building blocks that form the community. How do we filter users who
			                        		just posted randomly once in the group? How do we select users who represent
			                        		the values of not just themselves, but others in the community as well?
			                        		One solution that we can go with is to take the top 1000 posts from the 
			                        		<a href="https://www.reddit.com/r/Christianity/top/?sort=top&t=all" target="blank">
			                        		Top of All Time</a> category and use their authors as the users. This category
			                        		lists all the posts, from all time, by the number of upvotes they've recieved. If a post
			                        		has a lot of upvotes, it is likely that many people in the subreddit community 
			                        		agree with the values of the post, making it a good representation of the community. Selecting
			                        		posts from all time also prevents the selection from being subjective to recent events, 
			                        		giving a more wholesome representation.
		                        	</div>
		                        </li>
		                        <li style="background-color: #dddddd;">
		                        	<div class="list-content">
		                        	<h2>Users Connected to Subreddits</h2>
		                        	<p>
		                        		Now that we have a list of roughly 1000 users from both the Christianity and Islam subreddits, 
		                        		we can look at how they compare to one another. We start by looking at the other subreddit
		                        		communities that the users have also posted or commented in. 
		                        	<p>
		                        		The graph to the right show both types of users linking to the differnt subreddits
		                        		that they are involved in. While there are many more subreddits that the users have posted to,
		                        		we filter by subreddits with the most users. This graph is nice to visualize how both types 
		                        		of users are indeed connected by the other subreddits that they belong to.
		                        	</div>
		                        </li>
		                        <li style="background-color: #bbbbbb;">
		                        	<div class="list-content">
		                        	<h2>Shared Subreddits</h2>
		                        	<p>
		                        		Here we've taken the shared subreddits (green nodes from before) and colored them based on 
		                        		their makeup of Christianity users (more blue) and Islam users (more red). We can see that most
		                        		all of these bubbles are purple, indicating a pretty even distribution of islam and christianity
		                        		users.
		                        	<p>
		                        	</div>
		                        </li>		                        
		                        <li style="background-color: #dddddd;">
		                        	<div class="list-content">
		                        	<h2>Users Connected to Users</h2>
		                        	<p>
		                        		Now that we've seen that users from both communities do indeed overlap in the subreddits they
		                        		subscribe to, we remove the subreddits from the graph and create a network where users
		                        		are connected if they have subreddits in common. Because we have found that almost every user
		                        		shares at least a few subreddits with every other user, we connect users who share twenty 
		                        		or more subreddits. This gives much more meaning to the connections between the users. This
		                        		network is shown on the right.
		                        	<h2>Modularity</h2>
		                        	<p>
		                        		With this network of interconnected users, we can use the concept of 
		                        		<a href="https://en.wikipedia.org/wiki/Modularity_(networks)" target="blank">
		                        			modularity 
		                        		</a>
		                        		. In a network where nodes are assigned to a specific group, modularity is a ratio of the 
		                        		number of edges in groups compared to the number of edges
		                        		that would appear if they were placed at random. Therefore, if the modularity is positive, then 
		                        		the number of edges that appear in the groups is greater than the number of
		                        		edges expected if placed randomly.
		                        	<p>
		                        		For instance, when we caclulate the modulartity of the network where groups are defined by the Islam and 
		                        		Christianity subreddits, we get a value of <b>0.035</b>. While this value is positive,
		                        		it is quite low and indicates that there is not much distinction of communities between 
		                        		the user in relation to them belonging to the Christianity or Islam subreddit. In other words,
		                        		users from the Christianity subreddit are no more inclined to connect to another users from the 
		                        		Christianity subreddit than they are to a user from the Islam subreddit.
		                        	</div>
		                        </li>
		                        <li style="background-color: #bbbbbb;">
		                        	<div class="list-content">
		                        	<h2>Community Detection</h2>
		                        	<p>
		                        		Since the christianity and islam subreddits didn't seem to form a basis for the communities
		                        		in our network, we use 
		                        		<a href="http://perso.crans.org/aynaud/communities/" target="blank">Python's</a>
		                        		<a href="https://en.wikipedia.org/wiki/Louvain_Modularity" target="blank">Louvain-algorithm</a>
		                        		to see if better communities can be detected. 
		                        	<p> 
		                        		The Louvain-algorithm extracts communities from the network in order to optimize
		                        		modularity. After assigning each user to a community that is created by this algorithm, 
		                        		the graph to the right displays the connected users again, this time colored
		                        		a differnt shade of grey coressponding to a community. From this partitioning
		                        		we calculate a modularity of <b>0.12</b>.  
		                        	<p>
		                        		Since this value is quite larger than the modularity value we calculated before, we can say
		                        		that the Christianity and Islam subreddits aren't nessesariy the key factor in communities 
		                        		between these users.
		                        	<p>
		                        		Furthermore, we can look at the two largest communities that the Louvain-algorithm found
		                        		and see which kind of users make them up. We see that the largest community is made up of 
		                        		48% Islam subreddit users and 52% Christianity subreddit users. The second largest
		                        		community is made up of 38% Islam subreddit users and 62% Christianity subreddit users. 
		                        		Both are pretty even splits!
		                        	</div>
		                        </li>
		                    </ul>
		                </div>
						
		                <div class="jcarousel-control-prev"></div>	
		                <div class="jcarousel-control-next"></div>
		                
		                <!--<p class="jcarousel-pagination">-->
		                
		            </div>
		            
		            </div>
		         </div>
	            
	            <div class="panel-right">
	            	<div >
		             <div class="jcarousel-wrapper">
		            	
		                <div class="jcarousel">
		                    <ul>
		                    	<li>
		                        	<div class="list-content">
		                        		<a href="https://www.reddit.com/about/team/" target="blank">
		                        			<img src='images/subreddit_characters.png'/>
		                        		</a>
		                        	</div>
		                        </li>
		                        <li>
		                        	<div class="list-content">
		                        	<img src='images/user_to_subreddit.png'/>
		                        	</div>
		                        </li>
								<li>
									<div class="list-content"  style="padding: 0; height: 425px;">
		                        		<div id="shared_subreddits_graph" style="height: 415px;"></div>	
		                        	</div>                        	
		                        </li>
		                        <li>
		                        	<div class="list-content">		                        		
		                        		<img src='images/user_to_user.png'/>
		                        	</div>
		                        </li>
		                        <li>	
		                        	<div class="list-content" style="text-align: center;">   
									<img src='images/community_detection.png'/>                     	                     	
		                        	<span class="chart chart1" data-percent="52">
										<span class="percent"></span>
										</br>
										<span>community 1</span>
									</span>							                     	
		                        	<span class="chart chart2" data-percent="62">
										<span class="percent"></span>
										</br>
										<span>community 2</span>
									</span>
		                        	</div>	   
		                        </li>
		                    </ul>
		                </div>
		                <div class="jcarousel-control-prev"></div>
		                <div class="jcarousel-control-next"></div>
		                
		            </div>
	           </div>
            
            </div>
			</div>
        
        
            <script>				
				 
				function drawGraph() {
					jsnx.draw(shared_subreddits, {
					  element: '#shared_subreddits_graph',
					  withLabels: true,
					  nodeAttr: {
					    r: function(d) {
					      // `d` has the properties `node`, `data` and `G`
					      return d.data.count;
					    }
					  },
					  nodeStyle: {
					    fill: function(d) { 
				            return d.data.color; 
				       },
				       stroke: 'none',
				       opacity: .7
					  },					  
					  labelStyle: {
					      fill: '#333333'
					  }
					});	
				}
				
							
				
			
				
				$('.chart1').easyPieChart({
					onStep: function(from, to, percent) {
						$(this.el).find('.percent').text((100-Math.round(percent))+"%/"+(Math.round(percent)));
					},
					trackColor: '#337AB7',
					barColor:'#b73438',
					scaleColor:false,
					lineWidth:30,
					animate: 2000,
					size: 150,
					lineCap:'circle'
				});
				
				$('.chart2').easyPieChart({
					onStep: function(from, to, percent) {
						$(this.el).find('.percent').text((100-Math.round(percent))+"%/"+(Math.round(percent)));
					},
					trackColor: '#337AB7',
					barColor:'#b73438',
					scaleColor:false,
					lineWidth:30,
					animate: 2000,
					size: 150,
					lineCap:'circle'
				});
				
				function reanimateCharts() {
					$('.chart1').data('easyPieChart').reanimate();
					$('.chart2').data('easyPieChart').reanimate();
				}
				
            	
            	$(".jcarousel-control-prev").click(function(){
            		reanimateCharts();
            		drawGraph();
            	});
			    $(".jcarousel-control-next").click(function(){
            		reanimateCharts();
            		drawGraph();
            	});
			    
			    $(document).keydown(function(e) {
				    switch(e.which) {
				        case 37: // left
				        	$(".jcarousel-control-prev").click();
				        break;				
				
				        case 39: // right
				        	$(".jcarousel-control-next").click();
				        break;
				
				        default: return; // exit this handler for other keys
				    }
				    e.preventDefault(); // prevent the default action (scroll / move caret)
				});    	
					   
			   
            </script>
    </div>
</div>
